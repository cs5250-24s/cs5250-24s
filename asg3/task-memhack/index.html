
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../task-kprobe/">
      
      
        <link rel="next" href="../task-sched/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>Task 2: Memory Manipulation in Tetris Game - CS5250 Assignments (2024 Spring)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#task-2-memory-manipulation-in-tetris-game" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CS5250 Assignments (2024 Spring)" class="md-header__button md-logo" aria-label="CS5250 Assignments (2024 Spring)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CS5250 Assignments (2024 Spring)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Task 2: Memory Manipulation in Tetris Game
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../asg1/" class="md-tabs__link">
          
  
    
  
  Assignment 1

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../asg2/" class="md-tabs__link">
          
  
    
  
  Assignment 2

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  Assignment 3

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../asg4/" class="md-tabs__link">
          
  
    
  
  Assignment 4

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CS5250 Assignments (2024 Spring)" class="md-nav__button md-logo" aria-label="CS5250 Assignments (2024 Spring)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CS5250 Assignments (2024 Spring)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../asg1/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment 1
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Assignment 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg1/task-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Setup a Virtual Machine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg1/task-kbuild/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 2: Build and Install Linux Kernel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg1/task-boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 3: Experience the Boot Sequence
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../asg2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment 2
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Assignment 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg2/task-module/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Developing a Kernel Module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg2/task-syscall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 2: Creating a New System Call
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg2/task-gdb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 3: Debugging with GDB
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment 3
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Assignment 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../task-kprobe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Hook System Calls with KProbes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Task 2: Memory Manipulation in Tetris Game
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Task 2: Memory Manipulation in Tetris Game
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#memory-regions" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Regions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#find-the-address-of-the-score" class="md-nav__link">
    <span class="md-ellipsis">
      Find the Address of the Score
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hack-the-score" class="md-nav__link">
    <span class="md-ellipsis">
      Hack the Score
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#im-so-scared" class="md-nav__link">
    <span class="md-ellipsis">
      I'm So Scared!
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../task-sched/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optional: Understanding the Linux Scheduler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../asg4/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Assignment 4
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Assignment 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg4/task-cloudinit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 0: Cloud-Init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg4/task-chardev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Character Device Driver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg4/task-pcidev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 2: PCI Device
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../asg4/task-interrupt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 3: Interrupt handler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="task-2-memory-manipulation-in-tetris-game">Task 2: Memory Manipulation in Tetris Game</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this task, you'll be using the same <code>tetris</code> binary as in
<a href="../task-kprobe/">Task 1</a>.</p>
</div>
<p>The game might not hold much appeal, but I'm eager to impress my friends with an
incredibly high score. Let's surprise them by modifying the score in the game.</p>
<p>The score is stored as a <code>int32_t</code> variable in memory. We'll locate the address
of the score and update it to a large number.</p>
<h2 id="memory-regions">Memory Regions</h2>
<p>In order to modify the score, we need to find the address of the score in the
<code>tetris</code> process.</p>
<p>The memory regions mapped to a process can be found in <code>/proc/[pid]/maps</code>. For
instance, to view the memory regions of the <code>bash</code> process:</p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">$ </span>pgrep<span class="w"> </span>bash
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="go">769525</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">$ </span>cat<span class="w"> </span>/proc/769525/maps
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">&lt;output omitted here&gt;</span>
</code></pre></div>
<p>Please check the manual page of
<a href="https://man7.org/linux/man-pages/man5/proc.5.html"><code>proc</code></a> for the meaning of
the columns.</p>
<p>Run the <code>tetris</code> game and pause it. Find its process ID using the <code>ps</code> or
<code>pgrep</code> command. Then, print the memory regions of the <code>tetris</code> process.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>In which memory regions is it likely that the score is stored?</p>
<ol>
<li>Provide a complete copy of the output of <code>/proc/[pid]/maps</code> for the
   <code>tetris</code> process.</li>
<li>List the memory regions that you believe are probable candidates for
   storing the score.</li>
<li>Explain your rationale for why these memory regions are likely to
   contain the score.</li>
</ol>
</div>
<h2 id="find-the-address-of-the-score">Find the Address of the Score</h2>
<p>Merely identifying suspicious memory regions isn't sufficient; pinpointing the
exact address of the score in the <code>tetris</code> process is necessary.
To find the exact address of the score in the <code>tetris</code> process, we can play the
game briefly, pause it, and then search through these regions for the score
value.
If a word in a memory region matches the score value, it's likely where the
score is stored.
This involves digging into the <code>tetris</code> process's virtual memory to gather the
necessary information.</p>
<p>Under procfs, there's a file <code>/proc/[pid]/mem</code> that allows you to read and
write to the virtual memory of a process. Please refer to the man page of
<a href="https://man7.org/linux/man-pages/man5/proc.5.html"><code>proc</code></a> and read the section
about <code>/proc/[pid]/mem</code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>No need to worry about permission issues in this task.
You can use <code>sudo</code> to read and write to <code>/proc/[pid]/mem</code>.</p>
</div>
<p>Here's a demo to help you understand how to hack into the virtual memory of a
process via <code>/proc/[pid]/mem</code>.</p>
<script src="https://gist.github.com/shen-jiamin/62e554df61510efe7095ad8335e1346b.js?file=demo-hacker.c"></script>

<script async id="asciicast-viIoLKiGb0HKNsIlErYFtiYFC" src="https://asciinema.org/a/viIoLKiGb0HKNsIlErYFtiYFC.js"></script>

<p>Please write a program in <strong>C or Python</strong> to locate the address of the score in
the <code>tetris</code> process. The program should accept a single command-line argument,
which is the process ID of the <code>tetris</code> process.</p>
<p>The program should first read the <code>maps</code> file of the <code>tetris</code> process to
determine the potential memory ranges where the score might be stored. Then, it
should read the score value from stdin and scan through the identified memory
regions to locate the score value. If it finds a memory location holding the
score value, it should print out the address of that memory location.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The actual pathname of the executed command in a process can be found by
reading the symbolic link <code>/proc/[pid]/exe</code>.</p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gp">$ </span>ls<span class="w"> </span>-al<span class="w"> </span>/proc/<span class="nv">$$</span>/exe
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="go">lrwxrwxrwx 1 shenjm shenjm 0 Mar 13 00:16 /proc/73799/exe -&gt; /usr/bin/zsh*</span>
</code></pre></div>
<p><a href="https://wiki.sei.cmu.edu/confluence/display/c/POS30-C.+Use+the+readlink%28%29+function+properly">Here</a>
is an example of how to use the <code>readlink</code> function to read the symbolic link.</p>
</div>
<p>It's possible that within these regions, there are multiple words containing the
same value as the score. To eliminate false positives, you can continue playing
the game and pause it again to observe how these words change. If you find
memory locations that don't change as expected when the score updates, you can
exclude them from consideration and finally find the actual address of the
score.</p>
<h2 id="hack-the-score">Hack the Score</h2>
<p>Now that you have determined the address of the score, you can proceed to modify
it to a larger number, such as 1000000.</p>
<p>Please update your program as follows:</p>
<ol>
<li>Accept one additional command-line argument: the new score.</li>
<li>Once the address of the score is found, write the new score to that memory
   location.</li>
</ol>
<p>Finally, you should be able to perform the hacking using a single command:</p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="gp">$ </span>sudo<span class="w"> </span>./hack-tetris<span class="w"> </span>&lt;pid&gt;<span class="w"> </span>&lt;target-score&gt;
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Please submit the source code of the program written in either C or Python.
If you choose Python, ensure that the first line of your program is
<code>#!/usr/bin/env python3</code>.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please note: any compilation errors, syntax errors, or runtime errors will
result in a score of 0 for this task.</p>
<p>You should probe the address of the score in your program interactively.
It's not allowed to hardcode the address of the score in your program.
A different victim program will be used to test your program, so the address
will be different from the one in this tetris game.</p>
</div>
<h2 id="im-so-scared">I'm So Scared!</h2>
<p>In this task, we demonstrated how a root user can read and write to the virtual
memory of a process running on the system, posing a security risk. If you are
using a shared system like the <a href="https://dochub.comp.nus.edu.sg/cf/services/compute-cluster">SoC Compute
Cluster</a>, the system
administrator might potentially access your process and extract sensitive
runtime information as well.</p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Please discuss security concern with a LLM such as ChatGPT.
Ask if there are any methods to prevent such unwanted actions.
Evaluate the provided response for its effectiveness.
If multiple solutions are suggested, choose only ONE of them to discuss.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "navigation.indexes", "navigation.sections", "navigation.tabs", "toc.integrate"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.3220b9d7.min.js"></script>
      
        <script src="../../javascripts/open_in_new_tab.js"></script>
      
    
  </body>
</html>